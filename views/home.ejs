<%- include('partials/header') %>

<div class="px-4 py-5 mb-5 text-center home-hero">
    <img class="d-block mx-auto mb-4" src="/images/wander-icon.png" alt="" width="72" height="72">
    <h1 class="display-5 fw-bold">Remember every journey.</h1>
    <div class="col-lg-6 my-5 mx-auto">
      <p class="lead mb-4">It's hard to keep track of every place you've ever been. With Wander, you can keep track of your travels and revisit them over and over again. Whether you use Wander just for you or to stir up some healthy competition with friends, we can't wait to see where you go next.</p>
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <% if (user) { %>
          <a href="/users/<%= user._id %>" class="btn btn-primary btn-lg px-4 gap-3" role="button">My Profile</a>
          <% } else { %>
            <a href="/auth/google" class="btn btn-primary btn-lg px-4 gap-3" role="button">Sign Up</a>
         <% } %>
        <a href="/countries/all" class="btn btn-outline-secondary btn-lg px-4" role="button">Explore</a>
      </div>
    </div>
</div>
<div class="container px-4 py-5" id="featured-3">
    <h2 class="pb-2 border-bottom">What can you do with Wander?</h2>
    <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
      <div class="feature col">
        <i class="fa-solid fa-marker fa-2xl mb-5"></i>
        <h3>Write your story</h3>
        <p>Paragraph of text beneath the heading to explain the heading. We'll add onto it with another sentence and probably just keep going until we run out of words.</p>
        <a href="/posts/new" class="icon-link">
          Create a journal <i class="fa-solid fa-circle-arrow-right fa-lg"></i>
        </a>
      </div>
      <div class="feature col">
        <i class="fa-solid fa-question fa-2xl mb-5"></i>
        <h3>Ask questions</h3>
        <p>Paragraph of text beneath the heading to explain the heading. We'll add onto it with another sentence and probably just keep going until we run out of words.</p>
        <a href="/countries/all" class="icon-link">
          Post your question <i class="fa-solid fa-circle-arrow-right fa-lg"></i>
        </a>
      </div>
      <div class="feature col">
        <i class="fa-solid fa-certificate fa-2xl mb-5"></i>
        <h3>Collect badges</h3>
        <p>Paragraph of text beneath the heading to explain the heading. We'll add onto it with another sentence and probably just keep going until we run out of words.</p>
        <a href="/countries/all" class="icon-link">
          Add a country <i class="fa-solid fa-circle-arrow-right fa-lg"></i>
        </a>
      </div>
    </div>
</div>
<div class="container">
  <h1 class="py-5">Wander Journals</h2>
    <div class="profile-posts">
        <% if (posts.length > 0) { %>
            <% posts.forEach(p => { %>
                <% if (p.isPrivate === false) { %>
                    <div class="d-flex flex-column post-card">
                        <div class="d-flex mb-2 justify-content-between post-card-header">
                            <div class="d-flex flag">
                                <img src="<%= p.countryFlagUri %>">
                                <h4><a href="/posts/<%= p._id %>"><% if (p.title.length < 30) { %>
                                    <%= p.title %></a></h4>
                                <% } else { %>
                                    <%= p.title.substring(0,30) %>...</a></h4>   
                                <% } %>
                            </div>
                        </div>
                        <div class="post-card-excerpt">
                            <p><%= p.content.substring(0, 200) %>...</p>
                        </div>
                        <div class="d-flex">
                            <div class="d-flex align-items-center w-50">
                                <a href="/users/<%= p.user %>"><img src="<%= p.userAvatar %>" class="user-nav-img"></a>
                                <a href="/users/<%= p.user %>"><p class="mb-0 mx-3"><strong><%= p.userName %></strong></p></a>
                                <p class="mb-0 mx-2"data-toggle="tooltip" data-placement="top" title="Published"><small><%= p.createdAt.toDateString() %></small></p>
                                <i class="fa-solid fa-globe mx-2" data-toggle="tooltip" data-placement="top" title="Public"></i>
                            </div>
                            <div class="d-flex justify-content-end w-50">
                                <form action="/posts/<%= p._id %>" method="GET"><button type="submit" class="btn btn-primary">Read</button></form>
                            </div>
                        </div>
                    </div>
                <% } %>
            <% }); %>
        <% } else { %>
             <p>No journal entries yet. <% if (user && user._id === req.params.id) { %><a href="/posts/new">Create a new journal.</a><% } %></p>
        <% } %>
    </div>
  </div>
</div>

<%- include('partials/footer') %>